<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CODECX Institute Student Dashboard</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism.css">
  
  <link rel="stylesheet" href="styles.css">
<script src="https://cdn.jsdelivr.net/npm/prismjs@1/prism.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1/plugins/autoloader/prism-autoloader.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
</head>
<body class="bg-gray-50 min-h-screen">
  <header class="bg-white shadow px-4 py-4 flex flex-wrap items-center justify-between gap-2 min-w-0">
    <h1 class="text-2xl font-bold text-indigo-800 flex-1 min-w-0 truncate">
      CODECX INSTITUTE FOR DEVELOPERS Student Dashboard
      <span class="feature-badge ml-2">Web Developer Program</span>
    </h1>
    <div class="flex items-center gap-2 min-w-0 flex-shrink-0">
      <img id="studentAvatar" class="w-10 h-10 rounded-full flex-shrink-0" src="" alt="avatar" />
      <span id="studentNameHeader" class="font-semibold truncate max-w-[110px]"></span>
      <button onclick="logout()" class="ml-1 px-4 py-1 bg-red-600 text-white rounded hover:bg-red-700 flex-shrink-0">Logout</button>
    </div>
  </header>
  <main class="max-w-4xl mx-auto py-8 px-2">
    <!-- Profile -->
    <section class="bg-white rounded shadow p-6 mb-8" id="profileSection">
      <h2 class="text-xl font-semibold mb-4">Profile</h2>
      <div class="flex items-center mb-4 flex-wrap gap-3 min-w-0">
        <img id="studentPassport" class="w-20 h-20 rounded-full border mr-6" src="" alt="Passport"/>
        <div class="min-w-0">
          <div id="studentFullName" class="text-lg font-bold truncate"></div>
          <div id="studentMatric" class="text-sm text-gray-500 truncate"></div>
          <div id="studentEmail" class="text-sm text-gray-600 truncate"></div>
          <div id="studentPhone" class="text-sm text-gray-600 truncate"></div>
          <div id="studentStatus" class="text-sm mt-2"></div>
        </div>
      </div>
    </section>
    <!-- Masterclass Features (locked if unpaid) -->
    <section id="masterclassSection" class="feature-section bg-white rounded shadow p-6 mb-8">
      <h2 class="text-xl font-semibold mb-4 flex items-center gap-2">
        Masterclass Features
        <span class="feature-badge"></span>
      </h2>
      <div class="grid grid-cols-2 gap-6">
        <div class="resource-card">
          <div class="title"><i class="bi bi-camera-video mr-2"></i> Live Coding Sessions</div>
          <div class="desc">Join weekly live interactive coding classes with top instructors. Participate, ask questions, and build projects together.</div>
          <div class="link">Next session: <span id="nextSession"></span></div>
        </div>
        <div class="resource-card">
          <div class="title"><i class="bi bi-collection-play mr-2"></i> Video Library</div>
          <div class="desc">Access a library of recorded masterclass lessons & practical walk-throughs, available 24/7.</div>
          <a href="video-resources.html" class="link" id="videoLibraryLink" target="_blank">Browse videos</a>
        </div>
        <div class="resource-card">
          <div class="title"><i class="bi bi-code-slash mr-2"></i> Challenge & Projects</div>
          <div class="desc">Take part in exclusive coding challenges, hackathons, and practical projects for certificates and portfolio.</div>
          <a href="challenge.html" class="link" id="challengesLink" target="_blank">See current challenge</a>
        </div>
        <div class="resource-card">
          <div class="title"><i class="bi bi-journal-richtext mr-2"></i> Developer's Notes & Resources</div>
          <div class="desc">Download handouts, cheatsheets, and curated learning resources from top instructors for web devs.</div>
          <a href="resource.html" class="link" id="resourcesLink" target="_blank">Access Resources</a>
        </div>
      </div>
      <i class="bi bi-lock-fill padlock-icon" style="display:none"></i>
      <div id="unlockMessage" class="mt-5 text-center text-indigo-700 font-semibold hidden">
        <i class="bi bi-lock-fill"></i> These features are locked. Please complete payment to unlock full access!
      </div>
      <div class="mt-6 text-center">
        <button id="whatsappGroupBtn"
          class="px-4 py-2 rounded font-semibold bg-green-600 text-white shadow hover:bg-green-700 transition disabled:opacity-60 disabled:pointer-events-none"
          style="min-width: 190px;">
          <i class="bi bi-whatsapp mr-1"></i> Join WhatsApp Group
        </button>
        <div id="whatsappNote" class="text-xs text-gray-600 mt-1"></div>
      </div>
    </section>
    <!-- Chat/Community -->
    <section class="bg-white rounded shadow p-6 mb-8">
      <h2 class="text-xl font-semibold mb-4">Community & Chat</h2>
      <div class="scroll-area" id="chatArea">
        <!-- Messages here -->
      </div>
      <form id="chatForm" class="flex gap-2">
        <input id="chatInput" type="text" placeholder="Type your message..." class="flex-1 px-3 py-2 border rounded" autocomplete="off"/>
        <button type="submit" class="px-5 py-2 bg-indigo-600 text-white rounded">Send</button>
      </form>
    </section>
    <!-- Courses, Progress, Payments, Activity -->
    <section class="bg-white rounded shadow p-6 mb-8" id="coursesSection">
      <h2 class="text-xl font-semibold mb-4">Courses</h2>
      <div id="coursesList" class="flex flex-wrap gap-3 mb-4"></div>
      <div class="flex gap-2 flex-wrap">
        <select id="courseSelect" class="px-2 py-1 border rounded bg-white">
          <option value="">-- Select a Course --</option>
          <option value="HTML Only">HTML Only</option>
          <option value="CSS Only">CSS Only</option>
          <option value="JavaScript Only">JavaScript Only</option>
          <option value="HTML and CSS only">HTML and CSS only</option>
          <option value="HTML and JavaScript only">HTML and JavaScript only</option>
          <option value="CSS and JavaScript Only">CSS and JavaScript Only</option>
          <option value="All three">All three (HTML, CSS, JS)</option>
          <option value="Full Backend">Full Backend</option>
          <option value="FullStack">FullStack</option>
          <option value="Coupon Code">Coupon Code</option>
        </select>
        <button onclick="addCourse()" class="px-3 py-1 bg-indigo-600 text-white rounded">Add Course</button>
      </div>
    </section>

    <section class="bg-white rounded shadow p-6 mb-8" id="paymentsSection">
      <h2 class="text-xl font-semibold mb-4">Payments</h2>
      <div id="paymentStatus" class="mb-2"></div>
      <table class="min-w-full text-sm">
        <thead>
          <tr>
            <th class="px-2 py-1 border">Date</th>
            <th class="px-2 py-1 border">Amount</th>
            <th class="px-2 py-1 border">Status</th>
            <th class="px-2 py-1 border">Ref</th>
          </tr>
        </thead>
        <tbody id="paymentsTable"></tbody>
      </table>
      <button id="payNowBtn" class="mt-3 px-3 py-1 bg-indigo-600 text-white rounded">Pay Now</button>
    </section>
    <!-- Payment Modal -->
    <div class="custom-modal-bg" id="paymentModalBg">
      <div class="custom-modal" id="paymentModal">
        <button class="close-modal" onclick="closePaymentModal()">&times;</button>
        <div class="modal-title"><i class="bi bi-credit-card-2-front mr-2"></i> Pay for Masterclass</div>
        <div class="modal-message">Complete your payment securely with Paystack. Your dashboard will be updated automatically after successful payment.</div>
        <div class="modal-actions">
          <a href="https://paystack.shop/pay/codec" target="_blank" class="modal-btn" id="paystackProceedBtn">
            <i class="bi bi-arrow-right-circle mr-1"></i> Proceed to Paystack
          </a>
          <button class="modal-btn secondary" onclick="closePaymentModal()">Cancel</button>
        </div>
        <div class="mt-4 text-xs text-gray-500">After payment, you will be redirected for verification.</div>
      </div>
    </div>
    <!-- Modal for Day Quiz -->
    <div class="custom-modal-bg" id="dayQuizModalBg" style="display:none">
      <div class="custom-modal" id="dayQuizModal">
        <button class="close-modal" onclick="closeDayQuizModal()">&times;</button>
        <div id="dayQuizContent"></div>
      </div>
    </div>
    <!-- Modal for Receipt/Payment -->
    <div id="receiptModal" class="fixed inset-0 z-30 bg-black bg-opacity-60 flex items-center justify-center hidden">
      <div class="bg-white p-6 rounded shadow relative max-w-lg w-full">
        <button onclick="closeReceipt()" class="absolute top-2 right-2 text-lg font-bold">&times;</button>
        <div id="receiptModalContent"></div>
      </div>
    </div>
          <section class="bg-white rounded-xl shadow p-6 mb-8" id="assignmentSection">
  <h2 class="text-xl font-semibold mb-4 flex items-center gap-2">
    <i class="bi bi-upload mr-2 text-indigo-600"></i> Assignment Submission
  </h2>
  <form id="assignmentForm" class="flex flex-wrap gap-3 items-center mb-5">
    <input id="assignmentInput" type="file" class="block rounded border p-2 bg-gray-50 flex-1" />
    <button type="button" onclick="submitAssignment()" class="px-4 py-2 bg-indigo-600 text-white rounded font-semibold hover:bg-indigo-700 flex-shrink-0">
      <i class="bi bi-cloud-arrow-up mr-1"></i> Submit Assignment
    </button>
    <span id="assignmentStatus" class="ml-2 text-green-700 font-semibold"></span>
  </form>
  <div class="mt-2">
    <h3 class="text-lg font-semibold mb-3 text-gray-700 flex items-center gap-1">
      <i class="bi bi-clock-history mr-1 text-indigo-400"></i> Submission History
    </h3>
    <div id="assignmentHistory" class="space-y-4">
      <!-- Assignment items will be rendered here -->
    </div>
  </div>
</section>
    <!-- Progress Section - with Progress Bar -->
    <section class="bg-white rounded shadow p-6 mb-8" id="progressSection">
      <h2 class="text-xl font-semibold mb-4">Progress</h2>
      <div id="progressBar" class="w-full bg-gray-200 rounded-full h-4 mb-6 shadow">
        <div id="progressBarFill" class="bg-indigo-600 h-4 rounded-full" style="width: 0%;"></div>
      </div>
      <div id="progressSummary" class="mb-4 font-semibold text-indigo-800"></div>
      <div id="progressGrid" class="grid grid-cols-2 md:grid-cols-4 gap-3 overflow-x-auto" style="min-width: 0;"></div>
    </section>
    <section class="bg-white rounded shadow p-6" id="notesSection">
      <h2 class="text-xl font-semibold mb-4">Admin Notes</h2>
      <div id="adminNote" class="text-gray-700"></div>
    </section>
        <section class="bg-white rounded shadow p-6 mb-8" id="activitySection">
      <h2 class="text-xl font-semibold mb-4">Activity</h2>
      <table class="min-w-full text-sm mb-2">
        <thead>
          <tr>
            <th class="px-2 py-1 border">Date</th>
            <th class="px-2 py-1 border">Activity</th>
            <th class="px-2 py-1 border">Status</th>
          </tr>
        </thead>
        <tbody id="activityTable"></tbody>
      </table>
      <div class="flex gap-2 mt-4">
        <span id="attendanceStatus" class="ml-3 font-semibold"></span>
      </div>

    </section>
    <!-- Welcome Modal HTML (to be placed at the end of <body> in dashboard.html) -->
<div id="welcomeModalBg" class="fixed inset-0 z-50 bg-black bg-opacity-30 flex items-center justify-center hidden">
  <div id="welcomeModal" class="bg-white rounded-2xl shadow-2xl px-6 py-8 max-w-lg w-full relative animate-fadeIn">
    <button aria-label="Close" onclick="closeWelcomeModal()" class="absolute top-3 right-4 text-2xl text-gray-400 hover:text-indigo-600 transition-colors font-bold">&times;</button>
    <div id="welcomeSlides">
      <!-- Slides will be dynamically injected -->
    </div>
    <div class="flex justify-between items-center mt-6">
      <button id="welcomePrevBtn" onclick="welcomePrevSlide()" class="px-4 py-2 rounded-lg bg-gray-200 text-gray-700 font-semibold hover:bg-indigo-100 transition" style="min-width:90px;display:none">Previous</button>
      <button id="welcomeNextBtn" onclick="welcomeNextSlide()" class="px-4 py-2 rounded-lg bg-indigo-600 text-white font-semibold hover:bg-indigo-700 transition" style="min-width:90px;">Next</button>
    </div>
    <div class="flex justify-center mt-5">
      <div id="welcomeDots" class="flex gap-2"></div>
    </div>
  </div>
</div>
<style>
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px);}
  to { opacity: 1; transform: translateY(0);}
}
.animate-fadeIn { animation: fadeIn 0.5s; }
#welcomeModal h2 {
  font-size: 1.6rem;
  font-weight: bold;
  color: #4338ca;
  margin-bottom: 0.7rem;
}
#welcomeModal p {
  color: #374151;
  font-size: 1.07rem;
  margin-bottom: 0.5rem;
}
#welcomeDots .dot {
  width: 10px; height: 10px; border-radius: 50%;
  background: #e0e7ff; transition: background 0.2s;
  border: 1.5px solid #6366f1;
  display: inline-block;
}
#welcomeDots .dot.active { background: #6366f1; }
</style>
<script>
// Welcome modal slides content
const welcomeSlides = [
  {
    title: "Welcome to CODECX Student Dashboard!",
    body: `<p>Hi <span id="welcomeStudentName" class="font-bold text-indigo-700"></span> 👋, we're thrilled to have you at CODECX Institute for Developers!</p>
    <p>This dashboard is your all-in-one portal for your learning journey.</p>`
  },
  {
    title: "Explore Your Dashboard",
    body: `<ul class="list-disc pl-5 mb-2 text-gray-700">
      <li><b>Profile:</b> View and update your details.</li>
      <li><b>Masterclass Features:</b> Join live sessions, access videos, and download resources (unlocked after payment).</li>
      <li><b>Community & Chat:</b> Interact with peers, ask questions, and get instant help.</li>
      <li><b>Assignments:</b> Submit and track your assignment submissions easily.</li>
      <li><b>Progress:</b> Monitor your progress, course completion, and achievements.</li>
    </ul>`
  },
  {
    title: "Next Steps",
    body: `<p>
      <b>1.</b> <span class="text-indigo-700">Complete your profile</span> for a personalized experience.<br>
      <b>2.</b> <span class="text-indigo-700">Make payment</span> to unlock masterclass features and join the WhatsApp group.<br>
      <b>3.</b> <span class="text-indigo-700">Start learning!</span> Join live classes, participate in challenges, and build your portfolio.
    </p>
    <p class="mt-3 text-green-700 font-semibold">We're here to support you at every step. Enjoy your learning!</p>`
  }
];

let welcomeCurrentSlide = 0;
function showWelcomeModal(studentName = "") {
  // Only show for first login
  if (!localStorage.getItem('codecx_welcome_shown')) {
    renderWelcomeSlide();
    document.getElementById('welcomeModalBg').classList.remove('hidden');
    // Set student name dynamically
    setTimeout(() => {
      const el = document.getElementById('welcomeStudentName');
      if (el && studentName) el.textContent = studentName;
    }, 0);
    localStorage.setItem('codecx_welcome_shown', '1');
  }
}
function closeWelcomeModal() {
  document.getElementById('welcomeModalBg').classList.add('hidden');
}
function renderWelcomeSlide() {
  const slide = welcomeSlides[welcomeCurrentSlide];
  document.getElementById('welcomeSlides').innerHTML = `
    <h2>${slide.title}</h2>
    <div>${slide.body}</div>
  `;
  // Dots
  let dots = '';
  for (let i = 0; i < welcomeSlides.length; i++) {
    dots += `<span class="dot${i === welcomeCurrentSlide ? ' active' : ''}"></span>`;
  }
  document.getElementById('welcomeDots').innerHTML = dots;
  // Button states
  document.getElementById('welcomePrevBtn').style.display = (welcomeCurrentSlide === 0) ? "none" : "";
  document.getElementById('welcomeNextBtn').textContent = (welcomeCurrentSlide === welcomeSlides.length - 1) ? "Finish" : "Next";
}
function welcomeNextSlide() {
  if (welcomeCurrentSlide < welcomeSlides.length - 1) {
    welcomeCurrentSlide++;
    renderWelcomeSlide();
  } else {
    closeWelcomeModal();
  }
}
function welcomePrevSlide() {
  if (welcomeCurrentSlide > 0) {
    welcomeCurrentSlide--;
    renderWelcomeSlide();
  }
}

// Show modal after login if needed
document.addEventListener("DOMContentLoaded", function() {
  // Place student name if available
  setTimeout(() => {
    let name =
      (window.student && window.student.fullName) ||
      localStorage.getItem('studentName') ||
      '';
    showWelcomeModal(name);
  }, 1100); // show shortly after dashboard is loaded
});
</script>
  </main>
      <script src="script.js"></script>
    
</body>
</html>
